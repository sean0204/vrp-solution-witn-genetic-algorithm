# vrp-solution-witn-genetic-algorithm
solve VRP with genetic algorithm based on python

VRP(Vehicle Routing Problem):
可以把他想成TSP問題的延伸
有多個客戶點及一個或以上的場站進行配送
其中有車輛數 載貨量 營業時間 路徑限制 等等的限制
在這些限制下找出一路徑為最小成本
詳情可參考以下網址:
https://wiki.mbalib.com/zh-tw/%E8%BD%A6%E8%BE%86%E8%B7%AF%E5%BE%84%E9%97%AE%E9%A2%98

Genetic Algorithm:
基因演算法（英語：genetic algorithm (GA) ）是計算數學中用於解決最佳化的搜尋演算法，是進化演算法的一種。進化演算法最初是借鑑了進化生物學中的一些現象而發展起來的，這些現象包括遺傳、突變、自然選擇以及雜交等等。
基因演算法通常實現方式為一種電腦模擬。對於一個最佳化問題，一定數量的候選解（稱為個體）可抽象表示為染色體，使種群向更好的解進化。傳統上，解用二進位表示（即0和1的串），但也可以用其他表示方法。進化從完全隨機個體的種群開始，之後一代一代發生。在每一代中評價整個種群的適應度，從當前種群中隨機地選擇多個個體（基於它們的適應度），通過自然選擇和突變產生新的生命種群，該種群在演算法的下一次疊代中成為當前種群。
詳情請參考以下網址:
https://zh.wikipedia.org/wiki/%E9%81%97%E4%BC%A0%E7%AE%97%E6%B3%95

本程式精隨在於將路徑轉換為基因演算法的染色體
目標函數為成本
依照每代的目標函數 淘汰劣質的然色體 留下好的(選擇) 並進行交配變異

 參數初始化:
geneNum = 100 # 種群數量
generationNum = 1500  # 迭代次數
CENTER = 0  # 配送中心
HUGE = 999999
VARY = 0.05  # 變異機率
n = 90  # 客戶點數量
k = 8   # 車輛數量
Q = 264 # 額定載重量, t
dis = 160  # 續航里程, km
costPerKilo = 10  # 油價
epu = 20  # 早到逞罰成本
lpu = 30  # 晚到逞罰成本
speed = 40  # 速度，km/h


def getfit():

第一個for 
 取基因碼並從起始計算到基因結束
 將此段基因碼計算
 子路徑站點
 子路徑需求量
 子路徑距離
 子路徑時間

第二for 
 計算基因是否符合時窗限制條件
 如果為否將適應值乘極大值
 此基因將在篩選時被淘汰

if(len(choosetimeLess))==1到self.usedcard
 挑選車輛行走路徑
 多段路徑可以使用同一台車運送時
 儲存車輛編號與車輛運送之子路徑

第三FOR
 各別子路徑與車輛運送之路徑
 計算個別車輛燃油運送之子路徑距離的成本

第四FOR
 計算基因子路徑是否符合車輛運送容量
 如果為否將成本乘極大值
 篩選時將被淘汰

def crossPair:
將兩段基因碼進行交配
並且生成多個新子代
從子代之中選擇最好的基因並且更新成本

def crsoo:
取母體前三分之一進行交配生成子代

def mergeGenes:
將產生的子代從母體最後一個進行更新(更新母體後三分之一的基因資料)
